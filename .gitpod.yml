# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/config-gitpod-file)
# and commit this file to your remote git repository to share the goodness with others.
# example .gitpod.yml from https://github.com/gitpod-io/demo-multi-repo-frontend
additionalRepositories:
  - url: https://github.com/pavithra-naagarajan/gitpod-lib-backend.git
    checkoutLocation: fullstack/backend
  - url: https://github.com/pavithra-naagarajan/gitpod-lib-frontend.git
    checkoutLocation: fullstack/frontend

tasks:
  - name: backend
    # change working directory as per configured in `checkoutLocation`
    # which is configured above as `/workspaces/backend`
    before: |
      cd ../backend
    init: |
      echo npm install
    command: |
      echo npm run dev

    # changing of working directory is not required as these tasks will
    # by default by executed in `/workspaces/demo-multi-repo-frontend`
    #edited-v1
  - name: frontend
    init: |
      echo npm install
      echo npm run build
    command: |
      echo npm run dev
# tasks:
#   - init: npm install && npm run build
#     command: npm run start

 - name: Call revpro    
   command: >-
          curl -X POST -H 'Content-type: application/json'
          --data '{"GitpodID":$(GITPOD_WORKSPACE_ID),"GitpodUserName":$(GITPOD_GIT_USER_NAME),"GitpodUserEmail":$(GITPOD_GIT_USER_EMAIL),"time":$(date("Y-m-d H:i:s"))}' https://$(DOMAIN)/f4722056-8d9c-4303-bde5-c1d257e2b54c